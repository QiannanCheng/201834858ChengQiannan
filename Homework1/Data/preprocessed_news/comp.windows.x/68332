from iop server iie.ncku.edu.tw subject program wm_protocol open look toolkit hi all i am studi book unix desktop guid open look exampl winprop.c demonstr how program wm_protocol properti chapter can run onli show static text messag notic pop_up what problem thank advanc help iop file winprop.c show how set properti window includ x xatom.h definit xa_atom includ x intrinsic.h includ x stringdefs.h includ xol openlook.h includ xol statictext.h includ xol oblongbutt.h includ xol notice.h file defin atom _ol_ prefix id top level noticeshel widget static widget top_level notice_shel static widget make_notic static char messag client us properti commun window manag exampl illustr how open look applic request notif from window manag when certain event occur commun form clientmessag event applic process event handler atom us inter client commun atom atom_wm_protocol atom_wm_delete_window atom_wm_save_yourself static void handle_wm_messag static void save_and_exit static void save_yourself static void pop_notic static void do_exit string hold comand line us respond wm_save_yourself protocol messag char saved_cmdlin void main argc argv int argc char argv widget w int i save command line us respond wm_save_yourself protocol messag sprintf saved_cmdlin s argv argc i i argc i strcat saved_cmdlin argv i strcat saved_cmdlin creat initi top level widget top_level oliniti argv ol_main null argc argv creat statictext widget w xtvacreatemanagedwidget stext statictextwidgetclass top_level xtnstring messag xtnwidth null creat noticeshel widget later us make_notic top_level intern atom atom_wm_protocol xinternatom xtdisplai w wm_protocol fals atom_wm_delete_window xinternatom xtdisplai w wm_delete_window fals atom_wm_save_yourself xinternatom xtdisplai w wm_save_yourself fals add event handler process clientmessag event sent window manag xtaddeventhandl top_level noeventmask true handle_wm_messag null realiz widget start process event xtrealizewidget top_level append properti wm_delete_window wm_save_yourself definit wm_protocol properti step requir window id top level widget window id valid onli after widget realiz xchangeproperti xtdisplai top_level xtwindow top_level atom_wm_protocol xa_atom propmodeappend atom_wm_delete_window xchangeproperti xtdisplai top_level xtwindow top_level atom_wm_protocol xa_atom propmodeappend atom_wm_save_yourself xtmainloop static void handle_wm_messag w client_data p_event widget w xtpointer client_data xevent p_event p_event type clientmessag p_event xclient.message_typ atom_wm_protocol p_event xclient.data.l atom_wm_delete_window save_and_exit p_event xclient.data.l atom_wm_save_yourself save_yourself static void save_and_exit displai notic give user chanc respond pop_notic top_level notice_shel static void save_yourself set wm_command properti save command line xchangeproperti xtdisplai top_level xtwindow top_level xa_wm_command xa_str propmodereplac saved_cmdlin strlen saved_cmdlin static widget make_notic parent widget parent widget w n_text n_control n_exit n_cancel creat button provid callback pop up notic w xtvacreatemanagedwidget quitbutton oblongbuttonwidgetclass parent xtnlabel exit null xtaddcallback w xtnselect pop_notic null creat noticeshel widget note you have us xtvacreatepopupshel instead usual xtvacreatemanagedwidget notice_shel xtvacreatepopupshel quitnotic noticeshellwidgetclass w null get id text control area widget noticeshel xtvagetvalu notice_shel xtntextarea n_text xtncontrolarea n_control null place messag text area noticeshel xtvasetvalu n_text xtnstring pleas confirm exit from program null add button control area noticeshel each button ha appropri callback n_exit xtvacreatemanagedwidget noticeexit oblongbuttonwidgetclass n_control xtnlabel exit null xtaddcallback n_exit xtnselect do_exit null n_cancel xtvacreatemanagedwidget noticecancel oblongbuttonwidgetclass n_control xtnlabel cancel xtndefault true null return w static void pop_notic w_eman w_notic widget w_eman w_notic xtvasetvalu w_notic xtnemanatewidget w_eman null pop up noticeshel widget noticeshel widget make sure aplic wait until user select from on button noticeshell' control area xtpopup w_notic xtgrabexclus static void do_exit w call_data client_data widget w xtpointer call_data client_data xclosedisplai xtdisplai w exit 